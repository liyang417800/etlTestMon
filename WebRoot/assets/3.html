<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>PC端播放流畅率监控系统</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- MetisMenu CSS -->
    <link href="css/plugins/metisMenu/metisMenu.min.css" rel="stylesheet">

    <!-- Timeline CSS -->
    <link href="css/plugins/timeline.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/sb-admin-2.css" rel="stylesheet">

    <!-- Morris Charts CSS -->
    <link href="css/plugins/morris.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="font-awesome-4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- jQuery -->
    <script src="js/jquery.js"></script>
    <script src="js/lhgcalendar/lhgcalendar.min.js"></script>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- highcharts -->
    <script src="js/highcharts/highcharts.js"></script>
    <!-- vectormap -->
    <link rel="stylesheet" href="js/jvectormap/jquery-jvectormap-1.2.2.css">
    <script src="js/jvectormap/jquery-jvectormap-1.2.2.min.js"></script>
    <script src="js/jvectormap/jquery-jvectormap-cn-merc-en.js"></script>
    <script src="js/jvectormap/data.js"></script>
</head>

<body>

    <div id="wrapper">
        <!-- Navigation -->
<nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">PC端播放流畅率监控系统</a>
    </div>

    <ul class="nav navbar-top-links navbar-right">
        <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                <i class="fa fa-user fa-fw"></i> 谭犇 <i class="fa fa-caret-down"></i>
            </a>
            <ul class="dropdown-menu dropdown-user">
                <li><a href="#"><i class="fa fa-user fa-fw"></i> User Profile</a>
                </li>
                <li><a href="#"><i class="fa fa-gear fa-fw"></i> Settings</a>
                </li>
                <li class="divider"></li>
                <li><a href="login.html"><i class="fa fa-sign-out fa-fw"></i> Logout</a>
                </li>
            </ul>
        </li>
    </ul>

    <div class="navbar-default sidebar" role="navigation">
        <div class="sidebar-nav navbar-collapse">
            <ul class="nav" id="side-menu">
                <li>
                    <a class="" href="?page=index">首页</a>
                </li>
                <li>
                    <a class="" href="?page=fluencyRate">播放流畅率</a>
                </li>
                <li>
                    <a class=" active " href="?page=timeConsuming">播放前耗时</a>
                </li>
                <li>
                    <a class="" href="?page=realTimeError">报错</a>
                </li>
                <li>
                    <a class="" href="?page=feedback">用户反馈统计</a>
                </li>
                <li style="border-bottom:1px solid #e5e5e5; margin:12px 0;"></li>
                <li>
                    <a class="" href="?page=alarmRecord">报警记录</a>
                </li>
                <li>
                    <a class="" href="?page=alarmSetting">报警设置</a>
                </li>
            </ul>
        </div>
    </div>
</nav>        <div id="page-wrapper" style="min-height: 413px;">
            <div class="container-fluid">
                <div class="row ">
    <h3 class="page-header">播放前耗时  <small><a href="">查看更多 >></a></small></h3>
</div>

<div class="row well">
    <form class="form-inline" role="form">
        <div style="margin-bottom: 12px;">
            <div class="form-group" style="margin-right: 12px;">
                <label for="" class="control-label">指标:</label>
                <select class="form-control">
                    <option value="全部">全部</option>
                    <option selected="" value="播放前置任务">播放前置任务</option>
                    <option value="广告加载">广告加载</option>
                    <option value="视频加载">视频加载</option>
                </select>
                <span>
                    <select class="form-control">
                        <option selected="" value="全部">全部码率</option>
                        <option value="标清">标清</option>
                        <option value="高清">高清</option>
                        <option value="超清">超清</option>
                    </select>
                    <select class="form-control">
                        <option selected="" value="全部">全部加载途径</option>
                        <option value="iKu">iKu</option>
                        <option value="CDN">CDN</option>
                        <option value="P2P">P2P</option>
                    </select>
                </span>

            </div>

            <div class="form-group" style="margin-right: 12px;">
                <label for="" class="control-label">地区:</label>
                <select name="" id="" class="form-control">
                    <option value="省">省</option>
                </select>
                <select name="" id="" class="form-control">
                    <option value="市">市</option>
                </select>
            </div>
            <div class="form-group" style="margin-right: 12px;">
                <label for="" class="control-label">数据粒度：</label>
                <label class="radio-inline">
                    <input type="radio" name="" id="" value="option1"> 小时
                </label>
                <label class="radio-inline">
                    <input type="radio" name="" id="" value="option1"> 周
                </label>
            </div>
            <div class="form-group" style="margin-right: 12px;">
                <lable class="control-label">时段:</lable>
                <input size="16" class="form-control form_datetime" type="text" value="2014-12-24 16:17:44">
                <span> - </span>
                <input size="16" class="form-control form_datetime" type="text" value="2014-12-24 16:17:44">
            </div>
        </div>
        <div>
            <div class="form-group" style="margin-right: 12px;">
                <label for="" class="control-label">对比方式:</label>
                <select class="form-control">
                    <option selected="" value="横向">横向</option>
                    <option value="纵向">纵向</option>
                </select>
            </div>
            <div class="form-group" style="margin-right: 12px;">
                <label for="" class="control-label">运营商:</label>
                <select name="" id="" class="form-control">
                    <option value="全部操作系统">全部运营商</option>
                </select>
            </div>
            <div class="form-group" style="margin-right: 12px;">
                <label for="" class="control-label">操作系统:</label>
                <select name="" id="" class="form-control">
                    <option value="全部操作系统">全部操作系统</option>
                </select>
            </div>
            <div class="form-group" style="margin-right: 12px;">
                <label for="" class="control-label">浏览器:</label>
                <select name="" id="" class="form-control">
                    <option value="全部浏览器">全部浏览器</option>
                </select>
            </div>

            <div class="form-group">
                <button type="submit" class="btn btn-primary">查询</button>
            </div>
        </div>
    </form>
</div>


<script>
    $(function(){
        $('.form_datetime').calendar({ format:'yyyy-MM-dd HH:mm:ss' });
    });
</script>

<div class="row" style="margin-bottom: 20px;">
    <div class="col-md-6">
        <div id="containerC" style="height:400px"></div>
        
        <script>
            $(function() {
                $('#containerC').highcharts({
                    chart: {
                        type: 'bar'
                    },
                    title: {
                        text: '全部耗时统计'
                    },
                    xAxis: {
                        categories: ['广东', '浙江', '江苏', '福建', '上海', '北京']
                    },
                    yAxis: {
                        min: 0,
                        title: {
                            text: ''
                        }
                    },
                    legend: {
                        backgroundColor: '#FFFFFF',
                        reversed: true
                    },
                    plotOptions: {
                        series: {
                            stacking: 'normal'
                        }
                    },
                    series: [{
                        name: '播放前置任务加载',
                        data: [5, 3, 4, 7, 2, 9]
                    }, {
                        name: '首片广告加载',
                        data: [2, 2, 3, 2, 1, 3]
                    }, {
                        name: '广告卡顿',
                        data: [3, 4, 4, 2, 5, 2]
                    }, {
                        name: '首个视频分片加载',
                        data: [3, 4, 4, 2, 5, 1]
                    }, {
                        name: '首个视频分片速率',
                        data: [3, 4, 4, 2, 5, 2]
                    }]
                });
            });
        </script>
        
    </div>
    <div class="col-md-6">
        <div id="map" style="height:400px;"></div>
        
        <script type="text/javascript">
            //绘制map
            function domap_lm(id, regionDatas,markersData) {
                var regionDataValues = {};
                var _markersData = {
                    'markers':null,
                    'values':null
                };

                try {
                    var mapObject = $('#' + id).vectorMap('get', 'mapObject');
                    if (undefined != mapObject) {
                        mapObject.remove();
                    }
                }
                catch (err) {
                }
                if(markersData != null){
                    _markersData.values = markersData.values;
                    _markersData.markers = markersData.markers;
                }
                if (undefined != regionDatas) {
                    for (var areaCode in regionDatas) {
                        regionDataValues[areaCode] = regionDatas[areaCode].vv;
                    }
                }
                var options = {
                    map: 'cn_mill_zh',
                    backgroundColor: 'white', // #505050
                    zoomOnScroll: false,
                    markers: _markersData.markers,
                    markerStyle: {
                        initial: {
                            fill: '#4DAC26'
                        },
                        hover: {
                            cursor: 'pointer'
                        },
                        selected: {
                            fill: '#CA0020'
                        }
                    },
                    onMarkerOver: function(event, code) {
                    },
                    onMarkerLabelShow: function(evt, tips, code) {
                        tips.html('' + tips.html() + '<br/>在线观看人数: ' + _markersData.values[code]);
                    },
                    series: {
                        regions: [{
                            values: regionDataValues,
                            scale: ['#B4DBF3', '#2B64B4'],
                            normalizeFunction: 'polynomial'
                        }],
                        markers: [{
                            attribute: 'r',
                            scale: [5, 15],
                            values: _markersData.values
                        }]
                    },
                    regionStyle: {
                        initial: {
                            fill: '#B4DBF3',
                            "fill-opacity": 1,
                            stroke: 'none',
                            "stroke-width": 0,
                            "stroke-opacity": 1
                        },
                        hover: {
                            "fill-opacity": 1,
                            fill: '#FFFF00'
                        },
                        selected: {
                            fill: 'yellow'
                        },
                        selectedHover: {}
                    },
                    onRegionLabelShow: function(event, label, code) {
                        var count = "未知";
                        var rank = "未知";
                        if(!regionDatas){
                            return;
                        }
                        if (regionDatas && regionDatas[code] && undefined != regionDatas[code]) {
                            count = regionDatas[code].vv;
                            rank = '<span style="font-weight:bold;">' + regionDatas[code].rank + '</span>';
                        }
                        label.html('' + label.html() + '<br/>排名: ' + rank + '<br/>在线观看人数: ' + count);
                    }
                };
                $('#' + id).vectorMap(options);
                // 隐藏放大缩小按钮
                $("div[class='jvectormap-zoomin']").hide();
                $("div[class='jvectormap-zoomout']").hide();
            }



            function draw(type) {

                var markersData = {
                    'values':[
                        887.70,
                        755.16,
                        310.69,
                        405.17,
                        248.31,
                        207.35,
                        217.22,
                        280.71,
                        210.32,
                        325.42
                    ],
                    'markers':[{
                        latLng: [34.62, 112.45],
                        name: '洛阳'
                    }, {
                        latLng: [34.74, 113.66],
                        name: '郑州'
                    }, {
                        latLng: [39.95, 116.34],
                        name: '北京'
                    }, {
                        latLng: [38.97, 121.53],
                        name: '大连'
                    }, {
                        latLng: [29.88, 121.64],
                        name: '宁波'
                    }]
                };
                var mapData = gdData.mapChart;
                /*
                var barData_province = {
                    'categories':['河南', '河北', '山东', '山西', '广州'],
                    'series': [{
                        name: 'VV',
                        data: [107, 31, 635, 203, 2]
                    }]
                };
                var barData_city = {
                    'categories':['广州', '深圳', '北京', '上海', '成都'],
                    'series': [{
                        name: 'VV',
                        data: [107, 31, 635, 203, 2]
                    }]
                };
                */
                if(type=="province"){
                    domap_lm('map', mapData,null);
                    //drawBar(barData_province);
                }else{
                    domap_lm('map', null,markersData);
                    //drawBar(barData_city);
                }

            }
            /*
            $('#province').bind('click',function(){
                $(this).removeClass('btn-default').addClass('btn-primary');
                $('#city').removeClass('btn-primary');
                draw('province');
            });
            $('#city').bind('click',function(){
                $(this).removeClass('btn-default').addClass('btn-primary');
                $('#province').removeClass('btn-primary');
                draw('city');
            });
            $('#province').click();
            */
            //draw('province|city');
            draw('province');
        </script>
        
    </div>

</div>            </div>
        </div>

        <!-- Bootstrap Core JavaScript -->
        <script src="js/bootstrap.min.js"></script>
        <script src="js/plugins/metisMenu/metisMenu.min.js"></script>
        <script src="js/sb-admin-2.js"></script>

</body>

</html>